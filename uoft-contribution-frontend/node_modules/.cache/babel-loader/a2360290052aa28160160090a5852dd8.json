{"ast":null,"code":"var _jsxFileName = \"/Users/hongxu/Documents/ECE444/WebSiteBot_PS5/uoft-contribution-frontend/src/components/CreateArticle.js\";\nimport React from 'react';\nimport { ID, URL } from \"../constants\";\nimport Axios from \"axios\";\nimport ImageUploader from 'react-images-upload';\nimport { Link } from \"react-router-dom\";\n\nclass CreateArticle extends React.Component {\n  // set constructor\n  constructor(props) {\n    super(props);\n\n    this.handleBlogCreate = e => {\n      console.log(\"In create blog\");\n      console.log(\"Title: \", this.state.title);\n\n      if (!this.state.title.toString()) {\n        alert(\"Title can not be empty!\");\n        return;\n      }\n\n      if (!localStorage.getItem(ID)) {\n        alert(\"Please Login before create articles\");\n        return;\n      }\n\n      const url = `${URL}/create/`; // let history = useHistory();\n\n      Axios({\n        method: 'POST',\n        url: url,\n        data: {\n          imageURL: this.state.imageURL.toString(),\n          title: this.state.title.toString(),\n          content: this.state.content.toString(),\n          username: localStorage.getItem(ID),\n          rating: this.state.rating,\n          file: this.state.file\n        }\n      }).then(response => {\n        //print response\n        console.log(\"Response: \", response);\n\n        if (response.data.status === \"fail\") {\n          console.log(\"Response contains fail status\");\n          alert(\"Create Failed\");\n        } else {\n          console.log(\"gonna return\");\n          alert(\"Create Successfully!\");\n          return response.data;\n        }\n      }).catch(err => {\n        alert(\"Get Articles Failed\");\n        console.log(\"Get Articles Failed: \", err);\n      });\n    };\n\n    this.handleTitleChange = this.handleTitleChange.bind(this);\n    this.handleSubjectChange = this.handleSubjectChange.bind(this);\n    this.handleImageChange = this.handleImageChange.bind(this);\n    this.state = {\n      title: '',\n      content: '',\n      file: null,\n      imageURL: \"https://www.chopstickchronicles.com/wp-content/uploads/2020/03/Takoyaki-2020-update-34.jpg\",\n      rating: 5\n    };\n    this.onDrop = this.onDrop.bind(this);\n  } //store title and content\n\n\n  handleTitleChange(e) {\n    this.setState({\n      title: e.target.value\n    });\n  }\n\n  handleSubjectChange(e) {\n    this.setState({\n      content: e.target.value\n    });\n  }\n\n  handleImageChange(e) {\n    this.setState({\n      imageURL: e.target.value\n    });\n  }\n\n  // save uploaded image to state\n  onDrop(picture, url) {\n    this.setState({\n      file: picture\n    });\n    console.log(this.state.file);\n  } //\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-area\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, \"Create New Article\"), /*#__PURE__*/React.createElement(\"form\", {\n      role: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      styles: \"clear:both\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      id: \"title\",\n      name: \"title\",\n      placeholder: \"Title\",\n      required: true,\n      onChange: this.handleTitleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control\",\n      type: \"textarea\",\n      id: \"content\",\n      placeholder: \"Enter your content here...\",\n      maxLength: \"10000\",\n      rows: \"10\",\n      onChange: this.handleSubjectChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(ImageUploader, {\n      withIcon: true,\n      buttonText: \"Choose images\",\n      onChange: this.onDrop,\n      imgExtension: ['.jpg', '.gif', '.png', '.gif'],\n      maxFileSize: 5242880,\n      singleImage: \"singleImage\",\n      withPreview: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      id: \"imageURL\",\n      name: \"iamgeURL\",\n      placeholder: \"Image URL\",\n      required: true,\n      onChange: this.handleImageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Link, {\n      to: \"/blogs/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleBlogCreate,\n      type: \"button\",\n      id: \"submit\",\n      name: \"submit\",\n      className: \"btn btn-primary pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 25\n      }\n    }, \"Create\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      id: \"cancel\",\n      name: \"cancel\",\n      className: \"btn btn-primary pull-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }, \"Cancel\"))));\n  }\n\n}\n\nexport default CreateArticle;","map":{"version":3,"sources":["/Users/hongxu/Documents/ECE444/WebSiteBot_PS5/uoft-contribution-frontend/src/components/CreateArticle.js"],"names":["React","ID","URL","Axios","ImageUploader","Link","CreateArticle","Component","constructor","props","handleBlogCreate","e","console","log","state","title","toString","alert","localStorage","getItem","url","method","data","imageURL","content","username","rating","file","then","response","status","catch","err","handleTitleChange","bind","handleSubjectChange","handleImageChange","onDrop","setState","target","value","picture","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {ID, URL} from \"../constants\";\nimport Axios from \"axios\";\nimport ImageUploader from 'react-images-upload';\nimport {Link} from \"react-router-dom\";\n\nclass CreateArticle extends React.Component {\n\n    // set constructor\n    constructor(props) {\n        super(props);\n        this.handleTitleChange = this.handleTitleChange.bind(this);\n        this.handleSubjectChange = this.handleSubjectChange.bind(this);\n        this.handleImageChange = this.handleImageChange.bind(this);\n        this.state = {\n            title:'',\n            content:'',\n            file: null,\n            imageURL: \"https://www.chopstickchronicles.com/wp-content/uploads/2020/03/Takoyaki-2020-update-34.jpg\",\n            rating: 5\n        };\n        this.onDrop = this.onDrop.bind(this);\n    }\n\n\n\n    //store title and content\n    handleTitleChange(e){\n        this.setState({title:e.target.value})\n    }\n    handleSubjectChange(e){\n        this.setState({content:e.target.value})\n    }\n\n    handleImageChange(e){\n        this.setState({imageURL:e.target.value})\n    }\n\n    handleBlogCreate = (e) =>{\n        console.log(\"In create blog\");\n        console.log(\"Title: \", this.state.title)\n        if(!this.state.title.toString()){\n            alert(\"Title can not be empty!\")\n            return;\n        }\n\n        if(!localStorage.getItem(ID)){\n            alert(\"Please Login before create articles\")\n            return;\n        }\n        const url = `${URL}/create/`;\n        // let history = useHistory();\n\n        Axios({\n            method: 'POST',\n            url: url,\n            data: {\n                imageURL: this.state.imageURL.toString(),\n                title: this.state.title.toString(),\n                content: this.state.content.toString(),\n                username: localStorage.getItem(ID),\n                rating: this.state.rating,\n                file: this.state.file\n\n            }\n        })\n            .then(\n                response => { //print response\n                    console.log(\"Response: \", response);\n                    if (response.data.status === \"fail\") {\n                        console.log(\"Response contains fail status\");\n                        alert(\"Create Failed\")\n                    } else {\n                        console.log(\"gonna return\");\n                        alert(\"Create Successfully!\")\n                        return response.data;\n                    }\n                }\n            )\n            .catch(\n                err => {\n                    alert(\"Get Articles Failed\");\n                    console.log(\"Get Articles Failed: \", err);\n                }\n            )\n    }\n\n    // save uploaded image to state\n    onDrop(picture, url){\n        this.setState({file:picture})\n        console.log(this.state.file)\n    }\n\n    //\n\n\n    render() {\n        return (\n            <div className=\"form-area\">\n                <h4>Create New Article</h4>\n                <form role=\"form\">\n                    <br styles=\"clear:both\"/>\n                    {/*title*/}\n                    <div className=\"form-group\">\n                        <input type=\"text\" className=\"form-control\" id=\"title\" name=\"title\" placeholder=\"Title\"\n                               required\n                               onChange={this.handleTitleChange}/>\n                    </div>\n                    {/*content*/}\n                    <div className=\"form-group\">\n                        <textarea className=\"form-control\" type=\"textarea\" id=\"content\" placeholder=\"Enter your content here...\"\n                                  maxLength=\"10000\" rows=\"10\"\n                                  onChange={this.handleSubjectChange}></textarea>\n                    </div>\n                    <ImageUploader\n                        withIcon={true}\n                        buttonText='Choose images'\n                        onChange={this.onDrop}\n                        imgExtension={['.jpg', '.gif', '.png', '.gif']}\n                        maxFileSize={5242880}\n                        singleImage=\"singleImage\"\n                        withPreview={true}\n\n                    />\n                    <input type=\"text\" className=\"form-control\" id=\"imageURL\" name=\"iamgeURL\" placeholder=\"Image URL\"\n                           required\n                           onChange={this.handleImageChange}/>\n\n\n                    <Link to=\"/blogs/\">\n                        <button onClick={this.handleBlogCreate} type=\"button\"\n                                id=\"submit\" name=\"submit\" className=\"btn btn-primary pull-right\">\n                            Create\n                        </button>\n\n                        <button type=\"button\" id=\"cancel\" name=\"cancel\" className=\"btn btn-primary pull-right\">\n                            Cancel\n                        </button>\n                    </Link>\n                </form>\n            </div>\n        )\n\n    }\n\n\n\n}\nexport default CreateArticle;"]},"metadata":{},"sourceType":"module"}